# workshop 2

We're going to clean up the locations of the database which are very messy

We'll use the BAN API for offical addresses and get the address for each lat and long

and the http extension

so that our function can make requests on the external API

and fill in a table with the correct address for each tree

1. install the http extension
2. understand the BAN API
3. write a PL/pgSQL function that takes lat, long and queries as inputs and returns an address
    - sends a request to the BAN API
    - returns the answer as JSON
    - handle the fact that only 50 req / s can be made !!!
4. create a new function so that returns an address properly formatted
    - parses the answer
5. improve the function so that it updates the properly formatted address fields in the location table
    - stores the answer
6. create a function that calls the 3 functions in sequence
8. run that last function on the whole dataset

BAN API

<https://adresse.data.gouv.fr/api-doc/adresse>

Remember to

- RAISE notice for exceptions
-
